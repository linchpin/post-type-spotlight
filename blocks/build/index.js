(()=>{"use strict";const e=window.React,t=window.wp.plugins,o=window.wp.editPost,r=window.wp.i18n,s=window.wp.data,a=window.wp.coreData,n=window.wp.components,l=window.lodash,i=window.wp.primitives;function p(t){const{width:o,height:r}=t;return(0,e.createElement)(i.SVG,{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47.507 48",width:o,height:r},(0,e.createElement)(i.Defs,null,(0,e.createElement)(i.LinearGradient,{id:"linear-gradient",x1:"15.044",y1:"46.627",x2:"31.956",y2:".16",gradientUnits:"userSpaceOnUse"},(0,e.createElement)(i.Stop,{offset:0,stopColor:"#7d58c6"}),(0,e.createElement)(i.Stop,{offset:.261,stopColor:"#677bc9"}),(0,e.createElement)(i.Stop,{offset:.581,stopColor:"#51a1cc"}),(0,e.createElement)(i.Stop,{offset:.838,stopColor:"#44b8cf"}),(0,e.createElement)(i.Stop,{offset:1,stopColor:"#3fc1d0"}))),(0,e.createElement)(i.Circle,{cx:"43.966",cy:"3.54",r:"3.54",style:{fill:"#7a7a7a"}}),(0,e.createElement)(i.Path,{d:"m43.966,9.895c-3.509,0-6.354-2.845-6.354-6.354,0-.437.044-.863.128-1.275h-14.873C10.238,2.266,0,12.504,0,25.133h0c0,12.629,10.238,22.867,22.867,22.867h0c12.629,0,22.867-10.238,22.867-22.867v-15.489c-.562.162-1.154.251-1.768.251Zm-12.953,26.821l-8.146-4.073-8.146,4.073,1.534-9.001-5.607-6.272,8.146-1.018,4.073-8.146,4.073,8.146,8.146,1.018-5.594,6.272,1.521,9.001Z",style:{fill:"url(#linear-gradient)"}}))}const c=t=>{const{postType:o,isFeatured:s,onUpdateFeatured:a}=t;return(0,e.createElement)(n.__experimentalHStack,{alignment:"top",justify:"flex-start",spacing:"3",style:{marginTop:"calc(12px)",minHeight:"3rem"}},(0,e.createElement)(n.Tooltip,{text:(0,r.sprintf)((0,r.__)("You can query all featured %1$s using the pts_feature_tax"),o)},(0,e.createElement)(n.Icon,{icon:(0,e.createElement)(p,{width:"24px",height:"24px"})})),(0,e.createElement)(n.ToggleControl,{checked:s,label:(0,r.sprintf)((0,r.__)("Feature %1$s","post-type-spotlight"),(0,l.capitalize)(o)),onChange:a,style:{marginBottom:"0!important"}}))};(0,t.registerPlugin)("post-type-post-settings",{render:()=>{const t=(0,s.useSelect)((e=>e("core/editor").getCurrentPostId())),n=(0,s.useSelect)((e=>e("core/editor").getCurrentPostType()));let l=(0,s.useSelect)((e=>e("core").getEntityRecords("taxonomy","pts_feature_tax",{slug:"featured"}))),i=(0,s.useSelect)((e=>e("core/editor").getEditedPostAttribute("pts_feature_tax")));i&&!Array.isArray(i)&&(i=[i]);const[p]=(0,a.useEntityProp)("root","site","pts_featured_post_types_settings");if(!p||p&&-1===p.indexOf(n))return null;l=l?l[0]?.id:null;const u=l&&(i.includes(l)||i===l),{editEntityRecord:d}=(0,s.useDispatch)("core");return(0,e.createElement)(o.PluginPostStatusInfo,{name:"pts-post-settings-panel",title:(0,r.__)("Post Type Spotlight Settings","linchpin"),className:"pts-post-settings-panel",style:{width:"100%"}},(0,e.createElement)(c,{onUpdateFeatured:e=>{const o=e?[...i,l]:i.filter((e=>e!==l));d("postType",n,t,{pts_feature_tax:o})},isFeatured:u,postType:n}))},icon:p});const u=window.wp.blocks,d=window.wp.blockEditor,y=window.wp.hooks,g=({attributes:t,setAttributes:o})=>{const{query:{queryType:s}}=t;return(0,e.createElement)(n.SelectControl,{value:s,label:(0,r.__)("Display Type","post-type-spotlight"),onChange:e=>{o({query:{...t.query,queryType:e||"featured-only"}})},options:[{value:"featured-only",label:(0,r.__)("Only Show Featured","post-type-spotlight")},{value:"featured-first",label:(0,r.__)("Show Featured First","post-type-spotlight")},{value:"featured-exclude",label:(0,r.__)("Exclude Featured","post-type-spotlight")}]})};(0,y.addFilter)("editor.BlockEdit","core/query",(t=>o=>(e=>{const{attributes:{namespace:t}}=e;return"post-type-spotlight/featured-list"===t})(o)?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,{...o}),(0,e.createElement)(d.InspectorControls,null,(0,e.createElement)(n.PanelBody,null,(0,e.createElement)(g,{...o})))):(0,e.createElement)(t,{...o})));const m="post-type-spotlight/featured-list";(0,u.registerBlockVariation)("core/query",{name:m,title:(0,r.__)("Featured List","post-type-spotlight"),description:(0,r.__)("Displays a list of posts that are marked as featured.","post-type-spotlight"),isActive:({namespace:e,query:t})=>e===m,isPTSQueryLoopVariation:({namespace:e,query:t})=>e===m,icon:p,attributes:{namespace:m,query:{perPage:10,pages:0,paged:1,offset:0,postType:"page",order:"desc",orderBy:"date",author:"",search:"",exclude:[],sticky:"",inherit:!1},queryType:"featured-only"},scope:["inserter"],innerBlocks:[["core/post-template",{},[["core/post-title"],["core/post-excerpt"]]],["core/query-pagination"],["core/query-no-results"]],allowedControls:["postType","search","taxQuery"]})})();